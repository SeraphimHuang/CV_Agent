# LLM Prompt配置文件
# 统一管理所有prompt模板和LLM特定设置

# LLM基础配置
llm_configs:
  gemini:
    model: "gemini-2.5-flash"
    temperature: 0.1
    max_output_tokens: 2000
  
  gpt:
    model: "gpt-5-mini"
    temperature: 0.1
    max_tokens: 5000
    
  claude:
    model: "claude-sonnet-4-20250514"
    temperature: 0.1
    max_tokens: 2000

# 重试配置
retry_config:
  max_retries: 1
  retry_delay: 0.5  # seconds

# Prompt模板
prompts:
  screen_jd:
    base_template: |
      请分析以下职位描述，判断是否有美国公民/绿卡身份要求和是否要求高级别经验。同时识别是否提到期望的毕业时间。

      职位描述：
      {jd_text}

      判断标准：
      - citizenship_required: 如果明确提到必须US citizenship、green card等，则为true
      - senior_level_required: 如果要求senior level、5年以上经验、lead/manager角色等，则为true
      - expected_graduation_mentioned: 如果提到期望毕业时间（包括单点时间和时间窗口，如"预计2025年毕业""Class of 2025""Fall 2025""between Aug 2024 and Jun 2025"等），则为true
      - expected_graduation_time: 如果提到毕业时间，请提取原文文本；如果有多处表述，选择其中一处；如果未提及，返回null
    
    output_formats:
      gemini: |
        请严格按照以下JSON格式回答，不要添加任何其他内容：
        # 理由请使用一句中文简述
        {{
            "citizenship_required": true/false,
            "senior_level_required": true/false,
            "expected_graduation_mentioned": true/false,
            "expected_graduation_time": "原文文本" 或 null,
            "reason": "具体原因说明"
        }}
      
      gpt: |
        请严格按照以下JSON格式回答，不要添加任何其他内容：
        # 理由请使用一句中文简述
        {{
            "citizenship_required": true/false,
            "senior_level_required": true/false,
            "expected_graduation_mentioned": true/false,
            "expected_graduation_time": "原文文本" 或 null,
            "reason": "具体原因说明"
        }}
      
      claude: |
        请用JSON格式回答，确保格式正确：
        # 理由请使用一句中文简述
        {{
            "citizenship_required": true/false,
            "senior_level_required": true/false,
            "expected_graduation_mentioned": true/false,
            "expected_graduation_time": "原文文本" 或 null,
            "reason": "具体原因说明"
        }}

  rank_experiences:
    base_template: |
      请根据以下职位描述，从给定的经历中选择最相关的4个经历并进行排名。所有回答（除引用JD原文部分）必须使用中文。

      职位描述：
      {jd_text}

      个人经历库：
      {experiences_library}

      要求：
      - 选择最匹配职位要求的4个经历
      - match_percentage表示选择的4个经历的整体匹配度(0-100)
      - rank从1到4，1为最相关
      - justification要具体说明技能、经验、项目类型的匹配度
    
    output_formats:
      gemini: |
        请严格按照以下JSON格式回答，不要添加任何其他内容：
        {{
            "match_percentage": 85,
            "ranked_experiences": [
                {{"id": "经历ID", "rank": 1, "justification": "一句话中文理由"}},
                {{"id": "经历ID", "rank": 2, "justification": "一句话中文理由"}},
                {{"id": "经历ID", "rank": 3, "justification": "一句话中文理由"}},
                {{"id": "经历ID", "rank": 4, "justification": "一句话中文理由"}}
            ]
        }}
      
      gpt: |
        请严格按照以下JSON格式回答，不要添加任何其他内容：
        {{
            "match_percentage": 85,
            "ranked_experiences": [
                {{"id": "经历ID", "rank": 1, "justification": "一句话中文理由"}},
                {{"id": "经历ID", "rank": 2, "justification": "一句话中文理由"}},
                {{"id": "经历ID", "rank": 3, "justification": "一句话中文理由"}},
                {{"id": "经历ID", "rank": 4, "justification": "一句话中文理由"}}
            ]
        }}
      
      claude: |
        请用JSON格式回答，确保格式正确：
        {{
            "match_percentage": 85,
            "ranked_experiences": [
                {{"id": "经历ID", "rank": 1, "justification": "一句话中文理由"}},
                {{"id": "经历ID", "rank": 2, "justification": "一句话中文理由"}},
                {{"id": "经历ID", "rank": 3, "justification": "一句话中文理由"}},
                {{"id": "经历ID", "rank": 4, "justification": "一句话中文理由"}}
            ]
        }} 